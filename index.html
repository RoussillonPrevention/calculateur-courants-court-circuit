<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Calcul des courants de court-circuit</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    label { display: block; margin-top: 10px; }
    input, select { width: 100%; max-width: 400px; padding: 6px; margin-bottom: 10px; }
    button { background: #007acc; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 4px; }
    .result { background: white; margin-top: 20px; padding: 15px; border-radius: 5px; }
  </style>
</head>
<body>

  <h1>Calcul des courants de court-circuit IK3, IK2, IK1</h1>

  <label>Puissance du transformateur (kVA) :</label>
  <input type="number" id="kva" value="400">

  <label>Tension secondaire (V) :</label>
  <input type="number" id="voltage" value="400">

  <label>Ucc (%) :</label>
  <input type="number" id="ucc" value="6">

  <label>Couplage :</label>
  <select id="couplage">
    <option value="Dyn5">Dyn5</option>
    <option value="Yy0">Yy0</option>
    <option value="Yd11">Yd11</option>
  </select>

  <label>Matériau de l’âme :</label>
  <select id="materiau">
    <option value="cuivre">Cuivre</option>
    <option value="aluminium">Aluminium</option>
  </select>

  <label>Longueur du câble (m) :</label>
  <input type="number" id="longueur" value="20">

  <label>Section de phase (mm²) :</label>
  <input type="number" id="section_phase" value="50">

  <label>Nombre de conducteurs par phase :</label>
  <input type="number" id="nb_phase" value="1">

  <label>Section du conducteur de neutre (mm²) :</label>
  <input type="number" id="section_neutre" value="50">

  <label>Nombre de conducteurs de neutre :</label>
  <input type="number" id="nb_neutre" value="1">

  <button onclick="calculer()">Calculer</button>

  <div class="result" id="result"></div>

  <script>
    function calculer() {
      const kva = parseFloat(document.getElementById('kva').value);
      const voltage = parseFloat(document.getElementById('voltage').value);
      const ucc = parseFloat(document.getElementById('ucc').value);
      const couplage = document.getElementById('couplage').value;
      const materiau = document.getElementById('materiau').value;
      const longueur = parseFloat(document.getElementById('longueur').value);
      const section_phase = parseFloat(document.getElementById('section_phase').value);
      const nb_phase = parseInt(document.getElementById('nb_phase').value);
      const section_neutre = parseFloat(document.getElementById('section_neutre').value);
      const nb_neutre = parseInt(document.getElementById('nb_neutre').value);

      if (isNaN(kva) || isNaN(voltage) || isNaN(ucc) || isNaN(longueur) ||
          isNaN(section_phase) || isNaN(nb_phase) || isNaN(section_neutre) || isNaN(nb_neutre)) {
        document.getElementById('result').innerText = 'Veuillez remplir tous les champs correctement.';
        return;
      }

      // Calcul de Ik3
      const ik3 = (kva * 1000) / (voltage * (ucc / 100));

      // Résistivité en ohm.mm²/m
      const resistivite = materiau === 'cuivre' ? 0.0172 : 0.0282;

      // Résistance de la phase
      const r_phase = (resistivite * longueur) / (section_phase * nb_phase);

      // Résistance du neutre
      const r_neutre = (resistivite * longueur) / (section_neutre * nb_neutre);

      // Calcul de Ik2 (approximativement Ik3 / √3)
      const ik2 = ik3 / Math.sqrt(3);

      // Calcul de Ik1 (approximativement Ik3 / √3, ajusté selon le couplage)
      let ik1 = ik3 / Math.sqrt(3);
      if (couplage === 'Yy0') {
        ik1 *= 0.95; // Ajustement pour Yy0
      } else if (couplage === 'Yd11') {
        ik1 *= 0.9; // Ajustement pour Yd11
      }

      document.getElementById('result').innerHTML = `
        <p><strong>Résultats :</strong></p>
        <p>Ik3 (court-circuit triphasé) : ${ik3.toFixed(2)} A</p>
        <p>Ik2 (court-circuit biphasé) : ${ik2.toFixed(2)} A</p>
        <p>Ik1 (court-circuit monophasé) : ${ik1.toFixed(2)} A</p>
      `;
    }
  </script>

</body>
</html>
