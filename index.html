<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur de Courants de Court-Circuit</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .section {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .section-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #444;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        select, input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: block;
            margin: 20px auto;
        }
        button:hover {
            background-color: #45a049;
        }
        .result {
            font-weight: bold;
            font-size: 18px;
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
        }
        .ik3 {
            color: red;
        }
        .ik2 {
            color: green;
        }
        .ik1 {
            color: blue;
        }
        .reference {
            background-color: yellow;
            padding: 5px;
            margin-top: 10px;
        }
        .orange {
            color: orange;
        }
        .red {
            color: red;
        }
        .blue {
            color: blue;
        }
        .tooltip {
            position: relative;
            display: inline-block;
            border-bottom: 1px dotted black;
            cursor: help;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .help-section {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .help-item {
            margin-bottom: 10px;
        }
        .help-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Calculateur de Courants de Court-Circuit</h1>
        
        <div class="section">
            <div class="section-title">Paramètres du transformateur</div>
            
            <label for="transfo-power">Puissance du transformateur (kVA) <span class="orange">[25-2500 kVA]</span>:</label>
            <select id="transfo-power" class="orange">
                <option value="25">25 kVA</option>
                <option value="40">40 kVA</option>
                <option value="50">50 kVA</option>
                <option value="63">63 kVA</option>
                <option value="80">80 kVA</option>
                <option value="100">100 kVA</option>
                <option value="125">125 kVA</option>
                <option value="160">160 kVA</option>
                <option value="200">200 kVA</option>
                <option value="250">250 kVA</option>
                <option value="315">315 kVA</option>
                <option value="400">400 kVA</option>
                <option value="500">500 kVA</option>
                <option value="630">630 kVA</option>
                <option value="800">800 kVA</option>
                <option value="1000">1000 kVA</option>
                <option value="1250">1250 kVA</option>
                <option value="1600">1600 kVA</option>
                <option value="2000">2000 kVA</option>
                <option value="2500">2500 kVA</option>
            </select>
            
            <label for="couplage">Couplage du transformateur:</label>
            <select id="couplage">
                <option value="Dyn11">Dyn11</option>
                <option value="Yyn0">Yyn0</option>
                <option value="Dzn0">Dzn0</option>
            </select>
            
            <label for="ucc">Tension de court-circuit (Ucc) en %:</label>
            <input type="number" id="ucc" value="4" step="0.1" min="1" max="20">
            
            <label for="tension">Tension composée (V):</label>
            <select id="tension">
                <option value="400">400 V</option>
                <option value="230">230 V</option>
                <option value="690">690 V</option>
            </select>
        </div>
        
        <div class="section">
            <div class="section-title">Paramètres de la canalisation</div>
            
            <label for="conducteur-materiau">Matériau du conducteur:</label>
            <select id="conducteur-materiau">
                <option value="cuivre">Cuivre</option>
                <option value="aluminium">Aluminium</option>
            </select>
            
            <label for="longueur">Longueur de la canalisation (m):</label>
            <input type="number" id="longueur" value="10" min="1" max="1000">
            
            <label for="mode-pose">Mode de pose:</label>
            <select id="mode-pose">
                <option value="trefle">Multiconducteurs en trèfle</option>
                <option value="jointifs">Monoconducteurs jointifs</option>
                <option value="espaces">Monoconducteurs espacés</option>
            </select>
            
            <label for="section-phase">Section du conducteur de phase (mm²) <span class="red">[1.5-630 mm²]</span>:</label>
            <select id="section-phase" class="red">
                <option value="1.5">1.5 mm²</option>
                <option value="2.5">2.5 mm²</option>
                <option value="4">4 mm²</option>
                <option value="6">6 mm²</option>
                <option value="10">10 mm²</option>
                <option value="16">16 mm²</option>
                <option value="25">25 mm²</option>
                <option value="35">35 mm²</option>
                <option value="50">50 mm²</option>
                <option value="70">70 mm²</option>
                <option value="95">95 mm²</option>
                <option value="120">120 mm²</option>
                <option value="150">150 mm²</option>
                <option value="185">185 mm²</option>
                <option value="240">240 mm²</option>
                <option value="300">300 mm²</option>
                <option value="400">400 mm²</option>
                <option value="500">500 mm²</option>
                <option value="630">630 mm²</option>
            </select>
            
            <label for="nb-conducteurs-phase">Nombre de conducteurs par phase <span class="red">[1-4]</span>:</label>
            <select id="nb-conducteurs-phase" class="red">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
            
            <label for="section-neutre">Section du conducteur de neutre (mm²) <span class="blue">[1.5-630 mm²]</span>:</label>
            <select id="section-neutre" class="blue">
                <option value="1.5">1.5 mm²</option>
                <option value="2.5">2.5 mm²</option>
                <option value="4">4 mm²</option>
                <option value="6">6 mm²</option>
                <option value="10">10 mm²</option>
                <option value="16">16 mm²</option>
                <option value="25">25 mm²</option>
                <option value="35">35 mm²</option>
                <option value="50">50 mm²</option>
                <option value="70">70 mm²</option>
                <option value="95">95 mm²</option>
                <option value="120">120 mm²</option>
                <option value="150">150 mm²</option>
                <option value="185">185 mm²</option>
                <option value="240">240 mm²</option>
                <option value="300">300 mm²</option>
                <option value="400">400 mm²</option>
                <option value="500">500 mm²</option>
                <option value="630">630 mm²</option>
            </select>
            
            <label for="nb-conducteurs-neutre">Nombre de conducteurs par neutre <span class="blue">[1-4]</span>:</label>
            <select id="nb-conducteurs-neutre" class="blue">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
        </div>
        
        <button onclick="calculateShortCircuit()">Calculer les courants de court-circuit</button>
        
        <div id="results" style="display: none;">
            <div class="section">
                <div class="section-title">Résultats</div>
                <div class="result ik3">Ik3 (Court-circuit triphasé): <span id="ik3"></span> kA</div>
                <div class="result ik2">Ik2 (Court-circuit biphasé): <span id="ik2"></span> kA</div>
                <div class="result ik1">Ik1 (Court-circuit monophasé): <span id="ik1"></span> kA</div>
                <div class="reference">Valeur de référence: 20 kA (court-circuit à l'origine)</div>
            </div>
        </div>
        
        <button onclick="toggleHelp()">Aide / Explications techniques</button>
        
        <div id="help-section" class="help-section">
            <div class="help-item">
                <div class="help-title">Tension de court-circuit (Ucc)</div>
                <p>La tension de court-circuit est exprimée en pourcentage de la tension nominale du transformateur. Elle représente la tension qu'il faut appliquer au primaire du transformateur pour que le courant secondaire nominal circule lorsque le secondaire est en court-circuit.</p>
            </div>
            <div class="help-item">
                <div class="help-title">Courant de court-circuit triphasé (Ik3)</div>
                <p>Courant de défaut entre les trois phases d'un système triphasé. C'est le défaut qui produit les courants les plus élevés.</p>
            </div>
            <div class="help-item">
                <div class="help-title">Courant de court-circuit biphasé (Ik2)</div>
                <p>Courant de défaut entre deux phases d'un système triphasé. Généralement inférieur à Ik3.</p>
            </div>
            <div class="help-item">
                <div class="help-title">Courant de court-circuit monophasé (Ik1)</div>
                <p>Courant de défaut entre une phase et le neutre. Dépend fortement de l'impédance du neutre.</p>
            </div>
            <div class="help-item">
                <div class="help-title">Impédance</div>
                <p>L'impédance est l'opposition totale qu'un circuit présente au passage d'un courant alternatif. Elle combine la résistance et la réactance.</p>
            </div>
            <div class="help-item">
                <div class="help-title">Mode de pose</div>
                <p>Influence la dissipation thermique des conducteurs et donc leur résistance effective :<br>
                - Trèfle : conducteurs torsadés ensemble<br>
                - Jointifs : conducteurs parallèles et en contact<br>
                - Espacés : conducteurs parallèles mais séparés</p>
            </div>
        </div>
    </div>

    <script>
        function calculateShortCircuit() {
            // Récupération des valeurs d'entrée
            const Sn = parseFloat(document.getElementById('transfo-power').value) * 1000; // Puissance en VA
            const Ucc = parseFloat(document.getElementById('ucc').value) / 100; // Ucc en fraction
            const Un = parseFloat(document.getElementById('tension').value); // Tension composée en V
            const couplage = document.getElementById('couplage').value;
            
            const materiau = document.getElementById('conducteur-materiau').value;
            const longueur = parseFloat(document.getElementById('longueur').value); // en m
            const modePose = document.getElementById('mode-pose').value;
            const sectionPhase = parseFloat(document.getElementById('section-phase').value); // en mm²
            const nbPhase = parseInt(document.getElementById('nb-conducteurs-phase').value);
            const sectionNeutre = parseFloat(document.getElementById('section-neutre').value); // en mm²
            const nbNeutre = parseInt(document.getElementById('nb-conducteurs-neutre').value);
            
            // Calcul de l'impédance du transformateur
            const Zt = (Ucc * Math.pow(Un, 2)) / Sn;
            
            // Résistivité des matériaux (Ω.mm²/m)
            const rhoCuivre = 0.01851; // à 20°C
            const rhoAluminium = 0.0294; // à 20°C
            const rho = materiau === 'cuivre' ? rhoCuivre : rhoAluminium;
            
            // Facteur de mode de pose
            let facteurPose = 1;
            if (modePose === 'trefle') facteurPose = 0.8;
            else if (modePose === 'espaces') facteurPose = 1.2;
            
            // Calcul de la résistance de la ligne
            const Rligne = (rho * longueur * facteurPose) / (sectionPhase * nbPhase);
            
            // Réactance de la ligne (approximation)
            const Xligne = 0.08 * longueur; // Ω/km -> Ω/m
            
            // Impédance de la ligne
            const Zligne = Math.sqrt(Math.pow(Rligne, 2) + Math.pow(Xligne, 2));
            
            // Impédance totale
            const Ztotal = Zt + Zligne;
            
            // Calcul des courants de court-circuit
            const Ik3 = (Un / Math.sqrt(3)) / Ztotal; // en A
            const Ik2 = Ik3 * Math.sqrt(3) / 2;
            
            // Pour Ik1, on considère l'impédance du neutre
            const Rneutre = (rho * longueur * facteurPose) / (sectionNeutre * nbNeutre);
            const Zneutre = Math.sqrt(Math.pow(Rneutre, 2) + Math.pow(Xligne, 2));
            const Ik1 = Un / (Ztotal + Zneutre);
            
            // Affichage des résultats en kA avec 2 décimales
            document.getElementById('ik3').textContent = (Ik3 / 1000).toFixed(2);
            document.getElementById('ik2').textContent = (Ik2 / 1000).toFixed(2);
            document.getElementById('ik1').textContent = (Ik1 / 1000).toFixed(2);
            
            document.getElementById('results').style.display = 'block';
        }
        
        function toggleHelp() {
            const helpSection = document.getElementById('help-section');
            if (helpSection.style.display === 'block') {
                helpSection.style.display = 'none';
            } else {
                helpSection.style.display = 'block';
            }
        }
    </script>
</body>
</html>
