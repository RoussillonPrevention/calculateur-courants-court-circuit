<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur de Courants de Court-Circuit</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        h2 {
            color: #444;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .input-group {
            display: flex;
            gap: 10px;
        }
        .input-group div {
            flex: 1;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
        }
        button:hover {
            background-color: #45a049;
        }
        .results {
            margin-top: 20px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 4px;
        }
        .result-value {
            font-size: 18px;
            font-weight: bold;
        }
        .ik3 {
            color: red;
        }
        .ik2 {
            color: green;
        }
        .ik1 {
            color: blue;
        }
        .tarif {
            color: #ffcc00;
            background-color: #333;
            padding: 2px 5px;
        }
        .info-icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            background-color: #4CAF50;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 16px;
            font-size: 12px;
            cursor: help;
            margin-left: 5px;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: normal;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .help-section {
            margin-top: 30px;
            padding: 15px;
            background-color: #f0f8ff;
            border-radius: 4px;
        }
        .help-item {
            margin-bottom: 15px;
        }
        .help-item h3 {
            margin-top: 0;
            color: #0066cc;
        }
        .tab {
            overflow: hidden;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
            border-radius: 4px 4px 0 0;
        }
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 10px 16px;
            transition: 0.3s;
            color: #333;
        }
        .tab button:hover {
            background-color: #ddd;
        }
        .tab button.active {
            background-color: #4CAF50;
            color: white;
        }
        .tabcontent {
            display: none;
            padding: 15px;
            border: 1px solid #ccc;
            border-top: none;
            border-radius: 0 0 4px 4px;
            animation: fadeEffect 1s;
        }
        @keyframes fadeEffect {
            from {opacity: 0;}
            to {opacity: 1;}
        }
        .highlight {
            background-color: #fffacd;
            padding: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Calculateur de Courants de Court-Circuit</h1>
        
        <div class="tab">
            <button class="tablinks active" onclick="openTab(event, 'calculator')">Calculateur</button>
            <button class="tablinks" onclick="openTab(event, 'help')">Aide Technique</button>
        </div>
        
        <div id="calculator" class="tabcontent" style="display: block;">
            <form id="calculationForm">
                <h2>Paramètres du Transformateur</h2>
                
                <div class="form-group">
                    <label for="transformerPower">Puissance du transformateur (kVA) <span class="highlight">(orange)</span>:</label>
                    <select id="transformerPower" required>
                        <option value="">Sélectionnez...</option>
                        <option value="25">25 kVA</option>
                        <option value="40">40 kVA</option>
                        <option value="50">50 kVA</option>
                        <option value="63">63 kVA</option>
                        <option value="80">80 kVA</option>
                        <option value="100">100 kVA</option>
                        <option value="125">125 kVA</option>
                        <option value="160">160 kVA</option>
                        <option value="200">200 kVA</option>
                        <option value="250">250 kVA</option>
                        <option value="315">315 kVA</option>
                        <option value="400">400 kVA</option>
                        <option value="500">500 kVA</option>
                        <option value="630">630 kVA</option>
                        <option value="800">800 kVA</option>
                        <option value="1000">1000 kVA</option>
                        <option value="1250">1250 kVA</option>
                        <option value="1600">1600 kVA</option>
                        <option value="2000">2000 kVA</option>
                        <option value="2500">2500 kVA</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="couplage">Couplage du transformateur:</label>
                    <select id="couplage" required>
                        <option value="">Sélectionnez...</option>
                        <option value="Dyn11">Dyn11</option>
                        <option value="Yyn0">Yyn0</option>
                        <option value="Dzn0">Dzn0</option>
                        <option value="other">Autre</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="ucc">Tension de court-circuit Ucc (%):</label>
                    <input type="number" id="ucc" step="0.1" min="1" max="20" value="6" required>
                </div>
                
                <div class="form-group">
                    <label for="tension">Tension composée (V):</label>
                    <input type="number" id="tension" value="400" required>
                </div>
                
                <h2>Paramètres de la Canalisation</h2>
                
                <div class="form-group">
                    <label for="cableMaterial">Âme de la canalisation:</label>
                    <select id="cableMaterial" required>
                        <option value="cuivre">Cuivre</option>
                        <option value="aluminium">Aluminium</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="cableLength">Longueur de la canalisation (m):</label>
                    <input type="number" id="cableLength" min="0.1" step="0.1" required>
                </div>
                
                <div class="form-group">
                    <label for="installationMode">Mode de pose de la canalisation:</label>
                    <select id="installationMode" required>
                        <option value="multi">Multi/Monoconducteurs en trèfle</option>
                        <option value="jointifs">Monoconducteurs jointifs</option>
                        <option value="espaces">Monoconducteurs espacés</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <div class="form-group">
                        <label for="phaseSection">Section conducteur de phase <span class="highlight">(rouge)</span> (mm²):</label>
                        <select id="phaseSection" required>
                            <option value="1.5">1.5 mm²</option>
                            <option value="2.5">2.5 mm²</option>
                            <option value="4">4 mm²</option>
                            <option value="6">6 mm²</option>
                            <option value="10">10 mm²</option>
                            <option value="16">16 mm²</option>
                            <option value="25">25 mm²</option>
                            <option value="35">35 mm²</option>
                            <option value="50">50 mm²</option>
                            <option value="70">70 mm²</option>
                            <option value="95">95 mm²</option>
                            <option value="120">120 mm²</option>
                            <option value="150">150 mm²</option>
                            <option value="185">185 mm²</option>
                            <option value="240">240 mm²</option>
                            <option value="300">300 mm²</option>
                            <option value="400">400 mm²</option>
                            <option value="500">500 mm²</option>
                            <option value="630">630 mm²</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="phaseCount">Nombre de conducteurs par phase <span class="highlight">(rouge)</span>:</label>
                        <select id="phaseCount" required>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>
                
                <div class="input-group">
                    <div class="form-group">
                        <label for="neutralSection">Section conducteur de neutre <span class="highlight">(bleu)</span> (mm²):</label>
                        <select id="neutralSection" required>
                            <option value="1.5">1.5 mm²</option>
                            <option value="2.5">2.5 mm²</option>
                            <option value="4">4 mm²</option>
                            <option value="6">6 mm²</option>
                            <option value="10">10 mm²</option>
                            <option value="16">16 mm²</option>
                            <option value="25">25 mm²</option>
                            <option value="35">35 mm²</option>
                            <option value="50">50 mm²</option>
                            <option value="70">70 mm²</option>
                            <option value="95">95 mm²</option>
                            <option value="120">120 mm²</option>
                            <option value="150">150 mm²</option>
                            <option value="185">185 mm²</option>
                            <option value="240">240 mm²</option>
                            <option value="300">300 mm²</option>
                            <option value="400">400 mm²</option>
                            <option value="500">500 mm²</option>
                            <option value="630">630 mm²</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="neutralCount">Nombre de conducteurs par neutre <span class="highlight">(bleu)</span>:</label>
                        <select id="neutralCount" required>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>
                
                <button type="button" onclick="calculateShortCircuit()">Calculer</button>
            </form>
            
            <div id="results" class="results" style="display: none;">
                <h2>Résultats</h2>
                <p>Courant de court-circuit triphasé (Ik3): <span id="ik3" class="result-value ik3">-</span> kA</p>
                <p>Courant de court-circuit biphasé (Ik2): <span id="ik2" class="result-value ik2">-</span> kA</p>
                <p>Courant de court-circuit monophasé (Ik1): <span id="ik1" class="result-value ik1">-</span> kA</p>
                <p>Courant de court-circuit à l'origine: <span class="tarif">20 kA</span></p>
            </div>
        </div>
        
        <div id="help" class="tabcontent">
            <div class="help-section">
                <h2>Aide Technique</h2>
                
                <div class="help-item">
                    <h3>Courant de court-circuit triphasé (Ik3) <span class="ik3">●</span></h3>
                    <p>Le courant de court-circuit triphasé est le courant qui circule lorsqu'un défaut se produit entre les trois phases d'un système électrique triphasé. C'est généralement la valeur la plus élevée des trois types de court-circuit.</p>
                </div>
                
                <div class="help-item">
                    <h3>Courant de court-circuit biphasé (Ik2) <span class="ik2">●</span></h3>
                    <p>Le courant de court-circuit biphasé se produit lorsqu'un défaut apparaît entre deux phases. Sa valeur est environ 86% du courant de court-circuit triphasé dans un système symétrique.</p>
                </div>
                
                <div class="help-item">
                    <h3>Courant de court-circuit monophasé (Ik1) <span class="ik1">●</span></h3>
                    <p>Le courant de court-circuit monophasé se produit lorsqu'un défaut apparaît entre une phase et le neutre. Sa valeur dépend fortement de l'impédance du circuit de retour (neutre).</p>
                </div>
                
                <div class="help-item">
                    <h3>Puissance du transformateur <span class="highlight">(orange)</span></h3>
                    <p>La puissance apparente du transformateur exprimée en kVA (kilovoltampères). Elle représente la capacité de puissance que peut fournir le transformateur.</p>
                </div>
                
                <div class="help-item">
                    <h3>Tension de court-circuit (Ucc)</h3>
                    <p>La tension de court-circuit est exprimée en pourcentage de la tension nominale. Elle caractérise l'impédance interne du transformateur et influence directement le courant de court-circuit.</p>
                </div>
                
                <div class="help-item">
                    <h3>Couplage du transformateur</h3>
                    <p>Le couplage indique la manière dont les enroulements du transformateur sont connectés. Les couplages courants sont Dyn11, Yyn0 et Dzn0, chacun ayant des caractéristiques particulières pour le courant de court-circuit.</p>
                </div>
                
                <div class="help-item">
                    <h3>Âme de la canalisation</h3>
                    <p>Le matériau conducteur utilisé dans les câbles (cuivre ou aluminium). Le cuivre a une meilleure conductivité que l'aluminium, ce qui influence l'impédance de la ligne.</p>
                </div>
                
                <div class="help-item">
                    <h3>Mode de pose</h3>
                    <p>La disposition des câbles influence leur capacité à dissiper la chaleur et donc leur impédance. Les modes de pose courants sont :</p>
                    <ul>
                        <li><strong>Multi/Monoconducteurs en trèfle</strong>: câbles torsadés ensemble</li>
                        <li><strong>Monoconducteurs jointifs</strong>: câbles parallèles se touchant</li>
                        <li><strong>Monoconducteurs espacés</strong>: câbles parallèles espacés</li>
                    </ul>
                </div>
                
                <div class="help-item">
                    <h3>Section des conducteurs <span class="highlight">(rouge/bleu)</span></h3>
                    <p>La section transversale des conducteurs exprimée en mm². Plus la section est grande, plus l'impédance est faible et plus le courant de court-circuit est élevé.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        function calculateShortCircuit() {
            // Récupération des valeurs du formulaire
            const transformerPower = parseFloat(document.getElementById('transformerPower').value);
            const ucc = parseFloat(document.getElementById('ucc').value) / 100; // Conversion en valeur décimale
            const tension = parseFloat(document.getElementById('tension').value);
            const cableMaterial = document.getElementById('cableMaterial').value;
            const cableLength = parseFloat(document.getElementById('cableLength').value);
            const phaseSection = parseFloat(document.getElementById('phaseSection').value);
            const phaseCount = parseInt(document.getElementById('phaseCount').value);
            const neutralSection = parseFloat(document.getElementById('neutralSection').value);
            const neutralCount = parseInt(document.getElementById('neutralCount').value);
            const installationMode = document.getElementById('installationMode').value;
            const couplage = document.getElementById('couplage').value;
            
            // Validation des données
            if (isNaN(transformerPower) {
                alert("Veuillez sélectionner la puissance du transformateur");
                return;
            }
            
            // Calcul de l'impédance du transformateur
            // Zt = (Ucc/100) * (U²/Sn)
            const zt = ucc * Math.pow(tension, 2) / (transformerPower * 1000);
            
            // Calcul de la résistivité du câble
            // Rho = 0.0225 Ω.mm²/m pour l'aluminium, 0.018 Ω.mm²/m pour le cuivre
            const rho = cableMaterial === 'aluminium' ? 0.0225 : 0.018;
            
            // Calcul de la résistance des câbles
            // R = (rho * L) / (S * n)
            const rPhase = (rho * cableLength) / (phaseSection * phaseCount);
            const rNeutral = (rho * cableLength) / (neutralSection * neutralCount);
            
            // Calcul de la réactance des câbles (simplifié)
            // Valeurs typiques pour les câbles basse tension
            let xPhase, xNeutral;
            
            if (installationMode === 'multi') {
                // Câbles en trèfle
                xPhase = 0.08 * cableLength; // Ω/km -> Ω/m
                xNeutral = 0.08 * cableLength;
            } else if (installationMode === 'jointifs') {
                // Câbles jointifs
                xPhase = 0.10 * cableLength;
                xNeutral = 0.10 * cableLength;
            } else {
                // Câbles espacés
                xPhase = 0.13 * cableLength;
                xNeutral = 0.13 * cableLength;
            }
            
            // Impédance totale phase-neutre
            const zPhase = Math.sqrt(Math.pow(rPhase, 2) + Math.pow(xPhase, 2));
            const zNeutral = Math.sqrt(Math.pow(rNeutral, 2) + Math.pow(xNeutral, 2));
            
            // Calcul des courants de court-circuit
            // Ik3 = U / (sqrt(3) * Ztotal)
            const ik3 = (tension / (Math.sqrt(3) * Math.sqrt(Math.pow(zt + zPhase, 2)))) / 1000; // en kA
            
            // Ik2 = U / (2 * Ztotal) (simplifié)
            const ik2 = (tension / (2 * (zt + zPhase))) / 1000; // en kA
            
            // Ik1 = U / (Ztotal + Zneutre) (simplifié)
            const ik1 = (tension / (zt + zPhase + zNeutral)) / 1000; // en kA
            
            // Affichage des résultats
            document.getElementById('ik3').textContent = ik3.toFixed(2);
            document.getElementById('ik2').textContent = ik2.toFixed(2);
            document.getElementById('ik1').textContent = ik1.toFixed(2);
            document.getElementById('results').style.display = 'block';
            
            // Ajustement pour le couplage
            if (couplage === 'Dyn11') {
                // Pas de modification nécessaire
            } else if (couplage === 'Yyn0') {
                // Réduction possible de Ik1
                document.getElementById('ik1').textContent = (ik1 * 0.9).toFixed(2);
            } else if (couplage === 'Dzn0') {
                // Augmentation possible de Ik1
                document.getElementById('ik1').textContent = (ik1 * 1.1).toFixed(2);
            }
        }
    </script>
</body>
</html>
