<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur de Courants de Court-Circuit</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #333;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        select, input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 4px;
            background-color: #f9f9f9;
        }
        .ik3 {
            color: red;
            font-weight: bold;
        }
        .ik2 {
            color: green;
            font-weight: bold;
        }
        .ik1 {
            color: blue;
            font-weight: bold;
        }
        .warning {
            color: #ff9800;
            font-weight: bold;
        }
        .orange {
            color: orange;
        }
        .red {
            color: red;
        }
        .blue {
            color: blue;
        }
        .help-icon {
            cursor: help;
            color: #666;
            margin-left: 5px;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .help-section {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background-color: #f0f8ff;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Calculateur de Courants de Court-Circuit</h1>
        
        <div class="form-group">
            <h2>Paramètres du transformateur</h2>
            
            <div class="form-group">
                <label for="transfo-power">Puissance du transformateur (kVA) <span class="orange">(en orange)</span>:</label>
                <select id="transfo-power" class="orange">
                    <option value="25">25 kVA</option>
                    <option value="40">40 kVA</option>
                    <option value="50">50 kVA</option>
                    <option value="63">63 kVA</option>
                    <option value="80">80 kVA</option>
                    <option value="100">100 kVA</option>
                    <option value="125">125 kVA</option>
                    <option value="160">160 kVA</option>
                    <option value="200">200 kVA</option>
                    <option value="250">250 kVA</option>
                    <option value="315">315 kVA</option>
                    <option value="400">400 kVA</option>
                    <option value="500">500 kVA</option>
                    <option value="630">630 kVA</option>
                    <option value="800">800 kVA</option>
                    <option value="1000">1000 kVA</option>
                    <option value="1250">1250 kVA</option>
                    <option value="1600">1600 kVA</option>
                    <option value="2000">2000 kVA</option>
                    <option value="2500">2500 kVA</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="couplage">Couplage du transformateur:</label>
                <select id="couplage">
                    <option value="Dyn11">Dyn11</option>
                    <option value="Yyn0">Yyn0</option>
                    <option value="Dzn0">Dzn0</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="ucc">Tension de court-circuit Ucc (%):</label>
                <input type="number" id="ucc" value="4" step="0.1" min="1" max="20">
            </div>
            
            <div class="form-group">
                <label for="tension">Tension composée (V):</label>
                <input type="number" id="tension" value="400" step="10" min="100" max="1000">
                <span class="tooltip">ℹ<span class="tooltiptext">Tension entre phases (U) en volts</span></span>
            </div>
        </div>
        
        <div class="form-group">
            <h2>Paramètres de la canalisation</h2>
            
            <div class="form-group">
                <label for="material">Âme de la canalisation:</label>
                <select id="material">
                    <option value="cuivre">Cuivre</option>
                    <option value="aluminium">Aluminium</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="length">Longueur de la canalisation (m):</label>
                <input type="number" id="length" value="10" step="0.1" min="0.1" max="1000">
            </div>
            
            <div class="form-group">
                <label for="pose-mode">Mode de pose de la canalisation:</label>
                <select id="pose-mode">
                    <option value="multi">Multi-conducteurs en trèfle</option>
                    <option value="mono-trefle">Monoconducteurs en trèfle</option>
                    <option value="mono-jointifs">Monoconducteurs jointifs</option>
                    <option value="mono-espaces">Monoconducteurs espacés</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="phase-section">Section du conducteur de phase <span class="red">(en rouge)</span> (mm²):</label>
                <select id="phase-section" class="red">
                    <option value="1.5">1,5 mm²</option>
                    <option value="2.5">2,5 mm²</option>
                    <option value="4">4 mm²</option>
                    <option value="6">6 mm²</option>
                    <option value="10">10 mm²</option>
                    <option value="16">16 mm²</option>
                    <option value="25">25 mm²</option>
                    <option value="35">35 mm²</option>
                    <option value="50">50 mm²</option>
                    <option value="70">70 mm²</option>
                    <option value="95">95 mm²</option>
                    <option value="120">120 mm²</option>
                    <option value="150">150 mm²</option>
                    <option value="185">185 mm²</option>
                    <option value="240">240 mm²</option>
                    <option value="300">300 mm²</option>
                    <option value="400">400 mm²</option>
                    <option value="500">500 mm²</option>
                    <option value="630">630 mm²</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="phase-count">Nombre de conducteurs par phase <span class="red">(en rouge)</span>:</label>
                <select id="phase-count" class="red">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="neutral-section">Section du conducteur de neutre <span class="blue">(en bleu)</span> (mm²):</label>
                <select id="neutral-section" class="blue">
                    <option value="1.5">1,5 mm²</option>
                    <option value="2.5">2,5 mm²</option>
                    <option value="4">4 mm²</option>
                    <option value="6">6 mm²</option>
                    <option value="10">10 mm²</option>
                    <option value="16">16 mm²</option>
                    <option value="25">25 mm²</option>
                    <option value="35">35 mm²</option>
                    <option value="50">50 mm²</option>
                    <option value="70">70 mm²</option>
                    <option value="95">95 mm²</option>
                    <option value="120">120 mm²</option>
                    <option value="150">150 mm²</option>
                    <option value="185">185 mm²</option>
                    <option value="240">240 mm²</option>
                    <option value="300">300 mm²</option>
                    <option value="400">400 mm²</option>
                    <option value="500">500 mm²</option>
                    <option value="630">630 mm²</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="neutral-count">Nombre de conducteurs de neutre <span class="blue">(en bleu)</span>:</label>
                <select id="neutral-count" class="blue">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
            </div>
        </div>
        
        <button id="calculate-btn">Calculer les courants de court-circuit</button>
        
        <div id="results" class="result" style="display: none;">
            <h2>Résultats</h2>
            <p>Courant de court-circuit triphasé (Ik3): <span id="ik3-result" class="ik3">0</span> kA</p>
            <p>Courant de court-circuit biphasé (Ik2): <span id="ik2-result" class="ik2">0</span> kA</p>
            <p>Courant de court-circuit monophasé (Ik1): <span id="ik1-result" class="ik1">0</span> kA</p>
            <p id="warning-message" class="warning" style="display: none;">Attention: Le courant de court-circuit à l'origine est supérieur à 20 kA <span class="warning">(en jaune)</span></p>
        </div>
        
        <button id="help-btn">Aide et explications</button>
        
        <div id="help-section" class="help-section">
            <h2>Aide et explications techniques</h2>
            
            <h3>Termes techniques</h3>
            <p><strong>Ik3 (Court-circuit triphasé)</strong>: Courant de court-circuit lorsque les trois phases sont mises en contact simultanément.</p>
            <p><strong>Ik2 (Court-circuit biphasé)</strong>: Courant de court-circuit lorsque deux phases sont mises en contact.</p>
            <p><strong>Ik1 (Court-circuit monophasé)</strong>: Courant de court-circuit lorsqu'une phase est mise en contact avec le neutre.</p>
            
            <h3>Paramètres du transformateur</h3>
            <p><strong>Puissance (kVA)</strong>: Puissance apparente nominale du transformateur.</p>
            <p><strong>Couplage</strong>: Configuration des enroulements (primaire/secondaire).</p>
            <p><strong>Ucc (%)</strong>: Tension de court-circuit exprimée en pourcentage de la tension nominale.</p>
            
            <h3>Paramètres de la canalisation</h3>
            <p><strong>Âme</strong>: Matériau conducteur (cuivre ou aluminium).</p>
            <p><strong>Mode de pose</strong>: Influence la résistance thermique et donc l'échauffement des câbles.</p>
            <p><strong>Section des conducteurs</strong>: Plus la section est grande, plus l'impédance est faible.</p>
            
            <h3>Calculs</h3>
            <p>Les calculs sont basés sur la norme CEI 60909 et prennent en compte :</p>
            <ul>
                <li>L'impédance du transformateur</li>
                <li>L'impédance des câbles</li>
                <li>Le mode de court-circuit</li>
                <li>Le type de neutre</li>
            </ul>
        </div>
    </div>

    <script>
        document.getElementById('calculate-btn').addEventListener('click', calculateShortCircuit);
        document.getElementById('help-btn').addEventListener('click', toggleHelp);
        
        function toggleHelp() {
            const helpSection = document.getElementById('help-section');
            helpSection.style.display = helpSection.style.display === 'block' ? 'none' : 'block';
        }
        
        function calculateShortCircuit() {
            // Récupération des valeurs du formulaire
            const Sn = parseFloat(document.getElementById('transfo-power').value); // kVA
            const Ucc = parseFloat(document.getElementById('ucc').value) / 100; // Conversion en pu
            const Un = parseFloat(document.getElementById('tension').value); // V
            const length = parseFloat(document.getElementById('length').value); // m
            const material = document.getElementById('material').value;
            const phaseSection = parseFloat(document.getElementById('phase-section').value); // mm²
            const phaseCount = parseInt(document.getElementById('phase-count').value);
            const neutralSection = parseFloat(document.getElementById('neutral-section').value); // mm²
            const neutralCount = parseInt(document.getElementById('neutral-count').value);
            const poseMode = document.getElementById('pose-mode').value;
            
            // Calcul de l'impédance du transformateur
            const Zt = (Ucc * Un * Un) / (Sn * 1000); // Ω
            
            // Calcul de la résistivité en fonction du matériau
            const rho = material === 'cuivre' ? 0.0225 : 0.036; // Ω.mm²/m (à 20°C)
            
            // Calcul de la résistance des câbles
            const RcablePhase = (rho * length) / (phaseSection * phaseCount);
            const RcableNeutral = (rho * length) / (neutralSection * neutralCount);
            
            // Estimation de la réactance des câbles (simplifiée)
            let Xcable = 0;
            switch(poseMode) {
                case 'multi':
                    Xcable = 0.08 * length / 1000; // Ω
                    break;
                case 'mono-trefle':
                    Xcable = 0.09 * length / 1000; // Ω
                    break;
                case 'mono-jointifs':
                    Xcable = 0.1 * length / 1000; // Ω
                    break;
                case 'mono-espaces':
                    Xcable = 0.13 * length / 1000; // Ω
                    break;
            }
            
            // Impédance totale pour le court-circuit triphasé
            const Ztotal3 = Math.sqrt(Math.pow(Zt + RcablePhase, 2) + Math.pow(Xcable, 2));
            
            // Courant de court-circuit triphasé
            const Ik3 = (Un / Math.sqrt(3)) / Ztotal3 / 1000; // kA
            
            // Courant de court-circuit biphasé (environ 87% de Ik3)
            const Ik2 = Ik3 * Math.sqrt(3) / 2;
            
            // Impédance pour le court-circuit monophasé (avec neutre)
            const Ztotal1 = Math.sqrt(Math.pow(Zt + RcablePhase + RcableNeutral, 2) + Math.pow(Xcable * 1.5, 2));
            
            // Courant de court-circuit monophasé
            const Ik1 = (Un / Math.sqrt(3)) / Ztotal1 / 1000; // kA
            
            // Affichage des résultats
            document.getElementById('ik3-result').textContent = Ik3.toFixed(2);
            document.getElementById('ik2-result').textContent = Ik2.toFixed(2);
            document.getElementById('ik1-result').textContent = Ik1.toFixed(2);
            
            document.getElementById('results').style.display = 'block';
            
            // Vérification du courant à l'origine (>20kA)
            if (Ik3 > 20) {
                document.getElementById('warning-message').style.display = 'block';
            } else {
                document.getElementById('warning-message').style.display = 'none';
            }
        }
    </script>
</body>
</html>
