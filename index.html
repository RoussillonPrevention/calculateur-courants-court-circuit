<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur de Courants de Court-Circuit</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
        }
        h2 {
            color: #3498db;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        select, input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .input-group {
            display: flex;
            gap: 10px;
        }
        .input-group > div {
            flex: 1;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: block;
            margin: 20px auto;
        }
        button:hover {
            background-color: #2980b9;
        }
        .results {
            margin-top: 30px;
            padding: 20px;
            background: #fff;
            border-radius: 4px;
            box-shadow: 0 0 5px rgba(0,0,0,0.1);
        }
        .result-value {
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
        }
        .ik3 {
            color: red;
        }
        .ik2 {
            color: green;
        }
        .ik1 {
            color: blue;
        }
        .tarif {
            color: #FFD700;
            font-weight: bold;
        }
        .transfo-param {
            color: orange;
            font-weight: bold;
        }
        .phase-param {
            color: red;
            font-weight: bold;
        }
        .neutral-param {
            color: blue;
            font-weight: bold;
        }
        .help-icon {
            display: inline-block;
            width: 18px;
            height: 18px;
            background-color: #3498db;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 18px;
            font-size: 12px;
            cursor: help;
            margin-left: 5px;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
            font-weight: normal;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .help-section {
            margin-top: 40px;
            padding: 15px;
            background: #e8f4fc;
            border-radius: 4px;
        }
        .help-section h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        .help-term {
            font-weight: bold;
            color: #2980b9;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Calculateur de Courants de Court-Circuit</h1>
        
        <form id="calcForm">
            <h2>Paramètres du Transformateur</h2>
            
            <div class="form-group">
                <label for="transfoPower">Puissance du transformateur (kVA) <span class="transfo-param">[25-2500 kVA]</span> <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">Puissance apparente nominale du transformateur en kilovolt-ampères (kVA)</span></span></label>
                <select id="transfoPower" required>
                    <option value="25">25 kVA</option>
                    <option value="40">40 kVA</option>
                    <option value="50">50 kVA</option>
                    <option value="63">63 kVA</option>
                    <option value="80">80 kVA</option>
                    <option value="100" selected>100 kVA</option>
                    <option value="125">125 kVA</option>
                    <option value="160">160 kVA</option>
                    <option value="200">200 kVA</option>
                    <option value="250">250 kVA</option>
                    <option value="315">315 kVA</option>
                    <option value="400">400 kVA</option>
                    <option value="500">500 kVA</option>
                    <option value="630">630 kVA</option>
                    <option value="800">800 kVA</option>
                    <option value="1000">1000 kVA</option>
                    <option value="1250">1250 kVA</option>
                    <option value="1600">1600 kVA</option>
                    <option value="2000">2000 kVA</option>
                    <option value="2500">2500 kVA</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="couplage">Couplage du transformateur <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">Configuration des enroulements du transformateur (Dyn11 le plus courant)</span></span></label>
                <select id="couplage" required>
                    <option value="Dyn11" selected>Dyn11</option>
                    <option value="Yyn0">Yyn0</option>
                    <option value="Dyn5">Dyn5</option>
                    <option value="Yzn5">Yzn5</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="ucc">Tension de court-circuit Ucc (%) <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">Tension qu'il faut appliquer au primaire pour que le secondaire parcouru par le courant nominal soit en court-circuit</span></span></label>
                <input type="number" id="ucc" value="4" step="0.1" min="1" max="20" required>
            </div>
            
            <div class="form-group">
                <label for="tension">Tension secondaire (V) <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">Tension entre phases au secondaire du transformateur (400V pour les réseaux basse tension)</span></span></label>
                <input type="number" id="tension" value="400" step="1" min="100" max="1000" required>
            </div>
            
            <h2>Paramètres de la Canalisation</h2>
            
            <div class="form-group">
                <label for="material">Âme de la canalisation <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">Matériau conducteur utilisé pour les câbles (cuivre ou aluminium)</span></span></label>
                <select id="material" required>
                    <option value="cuivre" selected>Cuivre</option>
                    <option value="aluminium">Aluminium</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="length">Longueur de la canalisation (mètres) <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">Longueur totale des câbles entre le transformateur et le point de court-circuit</span></span></label>
                <input type="number" id="length" value="50" step="0.1" min="0.1" max="1000" required>
            </div>
            
            <div class="form-group">
                <label for="poseMode">Mode de pose <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">Configuration physique des conducteurs influençant leur refroidissement et donc leur impédance</span></span></label>
                <select id="poseMode" required>
                    <option value="multi">Multi/Monoconducteurs en trèfle</option>
                    <option value="jointifs" selected>Monoconducteurs jointifs</option>
                    <option value="espaces">Monoconducteurs espacés</option>
                </select>
            </div>
            
            <h3>Paramètres des conducteurs de phase <span class="phase-param">[en rouge]</span></h3>
            
            <div class="input-group">
                <div class="form-group">
                    <label for="phaseSection">Section (mm²) <span class="phase-param">[1.5-630 mm²]</span> <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">Section transversale des conducteurs de phase</span></span></label>
                    <select id="phaseSection" required>
                        <option value="1.5">1.5 mm²</option>
                        <option value="2.5">2.5 mm²</option>
                        <option value="4">4 mm²</option>
                        <option value="6">6 mm²</option>
                        <option value="10">10 mm²</option>
                        <option value="16">16 mm²</option>
                        <option value="25" selected>25 mm²</option>
                        <option value="35">35 mm²</option>
                        <option value="50">50 mm²</option>
                        <option value="70">70 mm²</option>
                        <option value="95">95 mm²</option>
                        <option value="120">120 mm²</option>
                        <option value="150">150 mm²</option>
                        <option value="185">185 mm²</option>
                        <option value="240">240 mm²</option>
                        <option value="300">300 mm²</option>
                        <option value="400">400 mm²</option>
                        <option value="500">500 mm²</option>
                        <option value="630">630 mm²</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="phaseCount">Nombre de conducteurs par phase <span class="phase-param">[1-4]</span> <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">Nombre de câbles en parallèle pour chaque phase</span></span></label>
                    <select id="phaseCount" required>
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                </div>
            </div>
            
            <h3>Paramètres des conducteurs de neutre <span class="neutral-param">[en bleu]</span></h3>
            
            <div class="input-group">
                <div class="form-group">
                    <label for="neutralSection">Section (mm²) <span class="neutral-param">[1.5-630 mm²]</span> <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">Section transversale des conducteurs de neutre</span></span></label>
                    <select id="neutralSection" required>
                        <option value="1.5">1.5 mm²</option>
                        <option value="2.5">2.5 mm²</option>
                        <option value="4">4 mm²</option>
                        <option value="6">6 mm²</option>
                        <option value="10">10 mm²</option>
                        <option value="16" selected>16 mm²</option>
                        <option value="25">25 mm²</option>
                        <option value="35">35 mm²</option>
                        <option value="50">50 mm²</option>
                        <option value="70">70 mm²</option>
                        <option value="95">95 mm²</option>
                        <option value="120">120 mm²</option>
                        <option value="150">150 mm²</option>
                        <option value="185">185 mm²</option>
                        <option value="240">240 mm²</option>
                        <option value="300">300 mm²</option>
                        <option value="400">400 mm²</option>
                        <option value="500">500 mm²</option>
                        <option value="630">630 mm²</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="neutralCount">Nombre de conducteurs de neutre <span class="neutral-param">[1-4]</span> <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">Nombre de câbles en parallèle pour le neutre</span></span></label>
                    <select id="neutralCount" required>
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                </div>
            </div>
            
            <button type="button" onclick="calculate()">Calculer les courants de court-circuit</button>
        </form>
        
        <div class="results" id="results" style="display: none;">
            <h2>Résultats</h2>
            
            <div class="form-group">
                <label>Courant de court-circuit triphasé (Ik3)</label>
                <div class="result-value ik3" id="ik3"></div>
            </div>
            
            <div class="form-group">
                <label>Courant de court-circuit biphasé (Ik2)</label>
                <div class="result-value ik2" id="ik2"></div>
            </div>
            
            <div class="form-group">
                <label>Courant de court-circuit monophasé (Ik1)</label>
                <div class="result-value ik1" id="ik1"></div>
            </div>
            
            <div class="form-group">
                <label>Courant de court-circuit à l'origine <span class="tarif">[20kA]</span></label>
                <div class="result-value tarif" id="originCurrent"></div>
            </div>
        </div>
        
        <div class="help-section">
            <h3>Aide et Explications</h3>
            <p><span class="help-term">Courant de court-circuit triphasé (Ik3)</span>: Courant maximal qui circule lorsqu'un défaut se produit entre les trois phases.</p>
            <p><span class="help-term">Courant de court-circuit biphasé (Ik2)</span>: Courant qui circule lorsqu'un défaut se produit entre deux phases.</p>
            <p><span class="help-term">Courant de court-circuit monophasé (Ik1)</span>: Courant qui circule lorsqu'un défaut se produit entre une phase et le neutre.</p>
            <p><span class="help-term">Tension de court-circuit (Ucc)</span>: Pourcentage de la tension nominale qu'il faut appliquer au primaire pour que le secondaire parcouru par le courant nominal soit en court-circuit.</p>
            <p><span class="help-term">Impédance</span>: Résistance totale (résistive et réactive) opposée au passage du courant alternatif.</p>
            <p><span class="help-term">Couplage du transformateur</span>: Configuration des enroulements primaires et secondaires (D pour triangle, Y pour étoile, z pour zigzag, n pour neutre sorti).</p>
        </div>
    </div>

    <script>
        function calculate() {
            // Récupération des valeurs du formulaire
            const transfoPower = parseFloat(document.getElementById('transfoPower').value);
            const couplage = document.getElementById('couplage').value;
            const ucc = parseFloat(document.getElementById('ucc').value) / 100; // Conversion en valeur décimale
            const tension = parseFloat(document.getElementById('tension').value);
            const material = document.getElementById('material').value;
            const length = parseFloat(document.getElementById('length').value);
            const poseMode = document.getElementById('poseMode').value;
            const phaseSection = parseFloat(document.getElementById('phaseSection').value);
            const phaseCount = parseInt(document.getElementById('phaseCount').value);
            const neutralSection = parseFloat(document.getElementById('neutralSection').value);
            const neutralCount = parseInt(document.getElementById('neutralCount').value);
            
            // Calcul de l'impédance du transformateur
            const Zt = (ucc * Math.pow(tension, 2)) / (transfoPower * 1000);
            
            // Calcul de la résistivité selon le matériau (Ohm.mm²/m)
            const resistivity = material === 'cuivre' ? 0.0225 : 0.036; // à 20°C
            
            // Calcul de la réactance linéique selon le mode de pose
            let linearReactance;
            switch(poseMode) {
                case 'multi':
                    linearReactance = 0.08; // Ohm/km
                    break;
                case 'jointifs':
                    linearReactance = 0.09; // Ohm/km
                    break;
                case 'espaces':
                    linearReactance = 0.11; // Ohm/km
                    break;
                default:
                    linearReactance = 0.09;
            }
            
            // Calcul de l'impédance de la canalisation
            const Rc = (resistivity * length) / (phaseSection * phaseCount);
            const Xc = (linearReactance * length) / 1000; // Conversion en Ohms
            
            // Impédance totale (transformateur + canalisation)
            const Ztotal = Math.sqrt(Math.pow(Zt + Rc, 2) + Math.pow(Xc, 2));
            
            // Calcul des courants de court-circuit
            const Ik3 = (tension / Math.sqrt(3)) / Ztotal;
            const Ik2 = Ik3 * Math.sqrt(3) / 2;
            
            // Pour Ik1, on doit prendre en compte l'impédance du neutre
            const Rn = (resistivity * length) / (neutralSection * neutralCount);
            const Zn = Math.sqrt(Math.pow(Rc + Rn, 2) + Math.pow(Xc, 2));
            const Ik1 = tension / (2 * Zn);
            
            // Courant de court-circuit à l'origine (20kA)
            const Iorigine = 20000;
            
            // Affichage des résultats
            document.getElementById('ik3').textContent = Ik3.toFixed(2) + ' A';
            document.getElementById('ik2').textContent = Ik2.toFixed(2) + ' A';
            document.getElementById('ik1').textContent = Ik1.toFixed(2) + ' A';
            document.getElementById('originCurrent').textContent = Iorigine.toFixed(2) + ' A';
            
            // Affichage de la section des résultats
            document.getElementById('results').style.display = 'block';
        }
    </script>
</body>
</html>
